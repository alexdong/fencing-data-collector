{% extends "base.html" %}

{% block content %}
<div class="bg-white rounded-lg shadow p-6">
    <h1 class="text-2xl font-bold mb-4">Bout Details</h1>
    
    <div class="mb-6">
        <div class="flex justify-between items-center">
            <div>
                <span class="font-semibold">{{ bout.fencer_a.name }}</span>
                vs
                <span class="font-semibold">{{ bout.fencer_b.name }}</span>
            </div>
            <div class="text-gray-600">
                {{ bout.date.strftime('%Y-%m-%d %H:%M') }}
            </div>
        </div>
        <div class="mt-2">
            <span class="font-bold text-xl">{{ bout.final_score_a }} - {{ bout.final_score_b }}</span>
        </div>
    </div>

    <!-- Touches Table -->
    <div class="bg-white p-6 rounded-lg shadow mt-6">
        <h2 class="text-xl font-semibold mb-4">Touches</h2>
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase border-b" rowspan="2">Time</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase border-b" rowspan="2">Scorer</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase border-b" rowspan="2">Action</th>
                    <th class="px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase border-b" colspan="7">Preparation</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase border-b" rowspan="2">Distance</th>
                    <th class="px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase border-b" colspan="5">Hit Details</th>
                    <th class="px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase border-b" colspan="3">Defense</th>
                    <th class="px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase border-b" colspan="4">Evasion</th>
                    <th class="px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase border-b" colspan="4">Outcome</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase border-b" rowspan="2">Video</th>
                </tr>
                <tr>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Footwork</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Combo</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Blade</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Direction</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Feints</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Changes</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Taking</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Quality</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Timing</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Line</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Target</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Position</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Number</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Quality</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Timing</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Success</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Follow</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Priority</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Quality</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Call</th>
                    <th class="px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase">Card</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for touch in bout.touches %}
                <tr class="hover:bg-gray-50">
                    <td class="px-2 py-2">{{ touch.seconds_from_start }}s</td>
                    <td class="px-2 py-2">{{ touch.scorer }}</td>
                    <td class="px-2 py-2">{{ touch.action_type }}</td>
                    <td class="px-2 py-2">{{ touch.prep_footwork }}</td>
                    <td class="px-2 py-2">{{ touch.prep_footwork_combo }}</td>
                    <td class="px-2 py-2">{{ touch.prep_blade }}</td>
                    <td class="px-2 py-2">{{ touch.prep_blade_direction }}</td>
                    <td class="px-2 py-2">{{ touch.prep_feint_count }}</td>
                    <td class="px-2 py-2">{{ touch.prep_feint_target_changes }}</td>
                    <td class="px-2 py-2">{{ touch.prep_taking_blade }}</td>
                    <td class="px-2 py-2">{{ touch.distance }}</td>
                    <td class="px-2 py-2">{{ touch.hit_quality }}</td>
                    <td class="px-2 py-2">{{ touch.hit_timing }}</td>
                    <td class="px-2 py-2">{{ touch.hit_line }}</td>
                    <td class="px-2 py-2">{{ touch.hit_target }}</td>
                    <td class="px-2 py-2">{{ touch.hit_piste_position }}</td>
                    <td class="px-2 py-2">{{ touch.defense_parry_type }}</td>
                    <td class="px-2 py-2">{{ touch.defense_parry_number }}</td>
                    <td class="px-2 py-2">{{ touch.defense_parry_quality }}</td>
                    <td class="px-2 py-2">{{ touch.evasion_type }}</td>
                    <td class="px-2 py-2">{{ touch.evasion_timing }}</td>
                    <td class="px-2 py-2">{{ touch.evasion_success }}</td>
                    <td class="px-2 py-2">{{ touch.evasion_follow_up }}</td>
                    <td class="px-2 py-2">{{ touch.outcome_priority }}</td>
                    <td class="px-2 py-2">{{ touch.outcome_quality }}</td>
                    <td class="px-2 py-2">{{ touch.outcome_referee_call }}</td>
                    <td class="px-2 py-2">{{ touch.outcome_card }}</td>
                    <td class="px-2 py-2">{{ touch.video_id }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
